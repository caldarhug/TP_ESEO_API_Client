<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">

<head>
	<th:block th:replace="fragments/general_configuration :: head_conf"></th:block>
	<title>Liste des villes</title>
	
	<script type="text/javascript" th:src="@{/libs/jquery/js/jquery-3.6.0.min.js}"></script>
	<script type="text/javascript" th:src="@{/libs/jquery/js/jquery.dataTables.min.js}"></script>
	<script type="text/javascript" th:src="@{/libs/jquery/js/dataTables.bootstrap5.min.js}"></script>
</head>

<body class="d-flex flex-column min-vh-100">
	<header th:replace="fragments/header.html :: header"></header>
	
	<main class="container-fluid flex-fill">
		<div class="container">
			<div class="row mt-3">
			
				<h1>Liste des villes</h1>

				<table id="tableVilles"
					class="table table-striped table-dark table-bordered table-sm"
					cellspacing="0" width="100%" aria-label="Liste des villes">
					<thead>
						<tr style="text-align:center">
							<th>Code commune</th>
							<th>Nom</th>
							<th>Code postal</th>
							<th>Libelle</th>
							<th>Ligne</th>
							<th>Latitude</th>
							<th>Longitude</th>
							<th>Modifier</th>
						</tr>
					</thead>
					<tbody>
						<div th:if="${villes.isEmpty()}"></div>
						<tr th:each="ville: ${villes}">
							<td style="text-align:center" th:text="${ville.codeCommune}"></td>
							<td th:text="${ville.nomCommune}"></td>
							<td style="text-align:center" th:text="${ville.codePostal}"></td>
							<td th:text="${ville.libelleAcheminement}"></td>
							<td th:text="${ville.ligne}"></td>
							<td style="text-align:center" th:text="${ville.coordonnee.latitude}"></td>
							<td style="text-align:center" th:text="${ville.coordonnee.longitude}"></td>
							<td style="text-align:center">
								<a th:href="@{/listVilles/{codeCommune} (codeCommune=${ville.codeCommune})}" type="button">
									<i class="bi bi-pencil-fill"></i>
								</a>
							</td>
						</tr>
					</tbody>
				</table>
			
			</div>
		</div>
	</main>

	<script type="text/javascript">
		$(document).ready(function() {
			$('#tableVilles').DataTable({
				"language": {
			        "sProcessing":    "Processus en cours...",
			        "sLengthMenu":    "Lister : _MENU_ ",
			        "sZeroRecords":   "Aucune ville trouvée",
			        "sEmptyTable":    "Aucune donnée disponible dans la table",
			        "sInfo":          "Affichage de _START_ à _END_ sur un total de _TOTAL_ villes",
			        "sInfoEmpty":     "Affichage de 0 à 0 sur un total de 0 villes",
			        "sInfoFiltered":  "(filtrage d'un maximum de _MAX_ villes)",
			        "sInfoPostFix":   "",
			        "sSearch":        "Rechercher :",
			        "sUrl":           "",
			        "sInfoThousands":  ",",
			        "sLoadingRecords": "Chargement...",
			        "oPaginate": {
			            "sFirst":    "Première",
			            "sLast":    "Dernière",
			            "sNext":    "Prochaine",
			            "sPrevious": "Précédente"
			        },
			        "oAria": {
			            "sSortAscending":  ": Activer pour trier la colonne par ordre croissant",
			            "sSortDescending": ": Activer pour trier la colonne par ordre décroissant"
			        }
			    }
			});
		})
	</script>
	
	<footer th:replace="fragments/footer.html :: footer"></footer>
	
</body>
</html>